{"ast":null,"code":"import * as i0 from '@angular/core';\nimport { Directive, Input, Injectable, HostBinding, HostListener, EventEmitter, Output, ContentChildren, Pipe, Component, NgModule } from '@angular/core';\nimport * as i1 from '@angular/platform-browser';\nconst DISABLED = 'disabled';\nconst APP_DISABLED = 'app-disabled';\nconst TAB_INDEX = 'tabindex';\nconst TAG_ANCHOR = 'a';\nclass DisableDirective {\n  constructor(eleRef, renderer) {\n    this.eleRef = eleRef;\n    this.renderer = renderer;\n    this.appDisable = true;\n  }\n  ngOnChanges() {\n    this.disableElement(this.eleRef.nativeElement);\n  }\n  ngAfterViewInit() {\n    this.disableElement(this.eleRef.nativeElement);\n  }\n  disableElement(element) {\n    if (this.appDisable) {\n      if (!element.hasAttribute(DISABLED)) {\n        this.renderer.setAttribute(element, APP_DISABLED, '');\n        this.renderer.setAttribute(element, DISABLED, 'true');\n        // disabling anchor tab keyboard event\n        if (element.tagName.toLowerCase() === TAG_ANCHOR) {\n          this.renderer.setAttribute(element, TAB_INDEX, '-1');\n        }\n      }\n    } else {\n      if (element.hasAttribute(APP_DISABLED)) {\n        if (element.getAttribute('disabled') !== '') {\n          element.removeAttribute(DISABLED);\n        }\n        element.removeAttribute(APP_DISABLED);\n        if (element.tagName.toLowerCase() === TAG_ANCHOR) {\n          element.removeAttribute(TAB_INDEX);\n        }\n      }\n    }\n    if (element.children) {\n      for (let ele of element.children) {\n        this.disableElement(ele);\n      }\n    }\n  }\n  static #_ = this.ɵfac = function DisableDirective_Factory(t) {\n    return new (t || DisableDirective)(i0.ɵɵdirectiveInject(i0.ElementRef), i0.ɵɵdirectiveInject(i0.Renderer2));\n  };\n  static #_2 = this.ɵdir = /* @__PURE__ */i0.ɵɵdefineDirective({\n    type: DisableDirective,\n    selectors: [[\"\", \"appDisable\", \"\"]],\n    inputs: {\n      appDisable: \"appDisable\"\n    },\n    features: [i0.ɵɵNgOnChangesFeature]\n  });\n}\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(DisableDirective, [{\n    type: Directive,\n    args: [{\n      selector: '[appDisable]'\n    }]\n  }], function () {\n    return [{\n      type: i0.ElementRef\n    }, {\n      type: i0.Renderer2\n    }];\n  }, {\n    appDisable: [{\n      type: Input\n    }]\n  });\n})();\nclass GDDragService {\n  constructor() {\n    this.source = {};\n  }\n  startDrag(component, name, parentID, type) {\n    this.source['component'] = component;\n    this.source['name'] = name;\n    this.source['parentID'] = parentID;\n    this.source['type'] = type;\n  }\n  getSource() {\n    return this.source['instance'];\n  }\n  accepts(data, x, y) {\n    if (!data) return false;\n    if (!data.instance) return false;\n    var target = data.instance;\n    return target.IsAcceptDrop(data, this.source, x, y);\n  }\n  static #_ = this.ɵfac = function GDDragService_Factory(t) {\n    return new (t || GDDragService)();\n  };\n  static #_2 = this.ɵprov = /* @__PURE__ */i0.ɵɵdefineInjectable({\n    token: GDDragService,\n    factory: GDDragService.ɵfac,\n    providedIn: 'root'\n  });\n}\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(GDDragService, [{\n    type: Injectable,\n    args: [{\n      providedIn: 'root'\n    }]\n  }], null, null);\n})();\nclass GDDraggable {\n  constructor() {\n    this.component = '';\n    this.id = '';\n    this.name = '';\n    this.type = '';\n    this.textToShow = '';\n    this.action = '';\n  }\n}\nclass GDDragableDirective {\n  constructor(dragService) {\n    this.dragService = dragService;\n    this.data = {\n      component: '',\n      id: '',\n      name: '',\n      parent: null,\n      instance: null,\n      isDragValid: null,\n      dragTypes: [],\n      item: null,\n      type: '',\n      textToShow: '',\n      action: ''\n    };\n  }\n  get draggable() {\n    return true;\n  }\n  set gdDraggable(data) {\n    if (data) {\n      this.data = data;\n    }\n  }\n  onDragStart(event) {\n    if (!this.data.instance) return false;\n    var isValid = this.data.instance[this.data.isDragValid](this.data.dragTypes);\n    if (!isValid) return false;\n    var dragData = new GDDraggable();\n    dragData.component = this.data.component;\n    dragData.id = this.data.id;\n    dragData.name = this.data.name;\n    dragData.action = this.data.action;\n    dragData.type = this.data.instance[this.data.type](this.data.data);\n    dragData.data = this.data.instance[this.data.item](this.data.data);\n    dragData.textToShow = this.data.instance[this.data.textToShow](this.data.data);\n    var crt = document.getElementById('gd-dragable');\n    if (!crt) {\n      crt = event.target.cloneNode(true);\n      crt.id = 'gd-dragable';\n      crt.innerHTML = `<div>\n                                                                <span style=\"color:#f00; font-size:18px\">+</span>\n                                                                <span style=\"color:#000; font-size:18px\">${dragData.textToShow}</span>\n                                                            </div>`;\n      crt.style.position = 'absolute';\n      crt.style.top = '-60px';\n      document.body.appendChild(crt);\n    } else {\n      crt.innerHTML = `<div style=\"color:#000; font-size:18px\">${dragData.textToShow}</div>`;\n    }\n    event.dataTransfer.setDragImage(crt, -26, 0);\n    event.dataTransfer.setData('Text', JSON.stringify(dragData));\n    var parentID = this.data.instance[this.data.parent](this.data.data);\n    this.dragService.startDrag(this.data.component, this.data.name, parentID, dragData.type);\n    event.preventDefault();\n    return true;\n  }\n  sleep(milliseconds) {\n    var start = new Date().getTime();\n    for (var i = 0; i < 1e7; ++i) {\n      if (new Date().getTime() - start > milliseconds) break;\n    }\n  }\n  static #_ = this.ɵfac = function GDDragableDirective_Factory(t) {\n    return new (t || GDDragableDirective)(i0.ɵɵdirectiveInject(GDDragService));\n  };\n  static #_2 = this.ɵdir = /* @__PURE__ */i0.ɵɵdefineDirective({\n    type: GDDragableDirective,\n    selectors: [[\"\", \"gd-draggable\", \"\"]],\n    hostVars: 1,\n    hostBindings: function GDDragableDirective_HostBindings(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵlistener(\"dragstart\", function GDDragableDirective_dragstart_HostBindingHandler($event) {\n          return ctx.onDragStart($event);\n        });\n      }\n      if (rf & 2) {\n        i0.ɵɵhostProperty(\"draggable\", ctx.draggable);\n      }\n    },\n    inputs: {\n      gdDraggable: [\"gd-draggable\", \"gdDraggable\"]\n    }\n  });\n}\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(GDDragableDirective, [{\n    type: Directive,\n    args: [{\n      selector: '[gd-draggable]'\n    }]\n  }], function () {\n    return [{\n      type: GDDragService\n    }];\n  }, {\n    draggable: [{\n      type: HostBinding,\n      args: ['draggable']\n    }],\n    gdDraggable: [{\n      type: Input,\n      args: ['gd-draggable']\n    }],\n    onDragStart: [{\n      type: HostListener,\n      args: ['dragstart', ['$event']]\n    }]\n  });\n})();\nclass GDDroppableDirective {\n  set gdDroppable(data) {\n    if (data) {\n      this.data = data;\n    }\n  }\n  constructor(el, ngZone, dragService) {\n    this.el = el;\n    this.ngZone = ngZone;\n    this.dragService = dragService;\n    this.data = null;\n    this.gdDrop = new EventEmitter();\n  }\n  ngOnInit() {\n    this.ngZone.runOutsideAngular(() => {\n      this.el.nativeElement.addEventListener('drop', this.onDrop.bind(this));\n      this.el.nativeElement.addEventListener('dragover', this.onDragOver.bind(this));\n      this.el.nativeElement.addEventListener('dragenter', this.onDragEnter.bind(this));\n      this.el.nativeElement.addEventListener('dragleave', this.onDragLeave.bind(this));\n    });\n  }\n  ngAfterViewInit() {\n    // const drop$  = fromEvent( this.el.nativeElement, \"drop\"      );\n    // const leave$ = fromEvent( this.el.nativeElement, \"dragleave\" );    \n    // const enter$ = fromEvent( this.el.nativeElement, \"dragenter\" );    \n    // const over$  = fromEvent( this.el.nativeElement, \"dragover\"  );    \n    // const stopConditions$ = merge( leave$ );\n    // enter$.pipe( debounceTime( 10 ), takeUntil(stopConditions$), repeat() ).subscribe( (event:any) => \n    // {\n    //     console.log('enter');\n    //     return false;\n    // });       \n    // leave$.pipe( debounceTime( 10 ), takeUntil(stopConditions$), repeat() ).subscribe( (event:any) => \n    // {\n    //     console.log('leave');\n    //     return false;\n    // });       \n    // drop$.pipe( debounceTime( 10 ), takeUntil(stopConditions$), repeat() ).subscribe( (event:any) => \n    // {\n    //     console.log('drop');\n    //     if( ! event.dataTransfer ) return false;\n    //     var json = event.dataTransfer.getData('Text');\n    //     if( json[0] !== '{' ) return false;\n    //     var                                              data = JSON.parse( json );\n    //                                                      data.data.x = event.offsetX; \n    //                                                      data.data.y = event.offsetY; \n    //     this.gdDrop.next( { target : this.data, source : data } );        \n    //     event.preventDefault();\n    //     return false;\n    // });       \n    // over$.pipe( debounceTime( 100 ), takeUntil(stopConditions$), repeat() ).subscribe( (event:any) => \n    // {\n    //     console.log('over');\n    //     if( ! this.data ) \n    //     {\n    //         event.stopPropagation();\n    //         return false;\n    //     }\n    //     var isAllowed = this.dragService.accepts( this.data, event.clientX, event.clientY );\n    //     console.log(isAllowed);\n    //     if( isAllowed ) \n    //     {\n    //         event.preventDefault();\n    //     }\n    //     return false;\n    // });       \n  }\n  onDrop(event) {\n    if (!event.dataTransfer) return false;\n    var json = event.dataTransfer.getData('Text');\n    if (json[0] !== '{') return false;\n    var data = JSON.parse(json);\n    data.data.x = event.offsetX;\n    data.data.y = event.offsetY;\n    this.gdDrop.next({\n      target: this.data,\n      source: data\n    });\n    event.preventDefault();\n    return false;\n  }\n  onDragOver(event) {\n    if (!this.data) {\n      event.stopPropagation();\n      return false;\n    }\n    var isAllowed = this.dragService.accepts(this.data, event.clientX, event.clientY);\n    if (isAllowed) {\n      event.dataTransfer.dropEffect = 'move';\n      event.preventDefault();\n    }\n    return false;\n  }\n  onDragEnter(event) {\n    event.dataTransfer.dropEffect = 'move';\n    event.preventDefault();\n    return false;\n  }\n  onDragLeave(event) {\n    event.dataTransfer.dropEffect = 'move';\n    event.preventDefault();\n    return false;\n  }\n  static #_ = this.ɵfac = function GDDroppableDirective_Factory(t) {\n    return new (t || GDDroppableDirective)(i0.ɵɵdirectiveInject(i0.ElementRef), i0.ɵɵdirectiveInject(i0.NgZone), i0.ɵɵdirectiveInject(GDDragService));\n  };\n  static #_2 = this.ɵdir = /* @__PURE__ */i0.ɵɵdefineDirective({\n    type: GDDroppableDirective,\n    selectors: [[\"\", \"gd-droppable\", \"\"]],\n    inputs: {\n      gdDroppable: [\"gd-droppable\", \"gdDroppable\"]\n    },\n    outputs: {\n      gdDrop: \"gd-drop\"\n    }\n  });\n}\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(GDDroppableDirective, [{\n    type: Directive,\n    args: [{\n      selector: '[gd-droppable]'\n    }]\n  }], function () {\n    return [{\n      type: i0.ElementRef\n    }, {\n      type: i0.NgZone\n    }, {\n      type: GDDragService\n    }];\n  }, {\n    gdDroppable: [{\n      type: Input,\n      args: ['gd-droppable']\n    }],\n    gdDrop: [{\n      type: Output,\n      args: ['gd-drop']\n    }]\n  });\n})();\nclass FocusDirective {\n  constructor(hostElement) {\n    this.hostElement = hostElement;\n    this.editor = '';\n  }\n  ngOnInit() {\n    switch (this.editor) {\n      case 'color':\n        {\n          setTimeout(() => {\n            this.hostElement.nativeElement.children[0].children[0].children[2].children[0].focus();\n          }, 250);\n        }\n        break;\n      case 'autocomplete':\n      case 'combobox':\n      case 'date':\n      case 'slider':\n        {\n          setTimeout(() => {\n            //  this.hostElement.nativeElement.children[0].children[0].children[1].children[0].focus(); \n          }, 250);\n        }\n        break;\n      default:\n        {\n          setTimeout(() => {\n            // console.log( this.hostElement.nativeElement.children[0].children[0].children[2].children[0] );\n            //  this.hostElement.nativeElement.children[0].children[0].children[0].focus();\n          }, 250);\n        }\n        break;\n    }\n  }\n  static #_ = this.ɵfac = function FocusDirective_Factory(t) {\n    return new (t || FocusDirective)(i0.ɵɵdirectiveInject(i0.ElementRef));\n  };\n  static #_2 = this.ɵdir = /* @__PURE__ */i0.ɵɵdefineDirective({\n    type: FocusDirective,\n    selectors: [[\"\", \"setFocus\", \"\"]],\n    inputs: {\n      editor: [\"setFocus\", \"editor\"]\n    }\n  });\n}\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(FocusDirective, [{\n    type: Directive,\n    args: [{\n      selector: '[setFocus]'\n    }]\n  }], function () {\n    return [{\n      type: i0.ElementRef\n    }];\n  }, {\n    editor: [{\n      type: Input,\n      args: ['setFocus']\n    }]\n  });\n})();\nclass DefaultMaskDirective {\n  set gdMask(host) {\n    if (host) {\n      this.host = host;\n    }\n  }\n  set PreValue(value) {\n    this.preValue = value;\n  }\n  constructor(el, renderer) {\n    this.el = el;\n    this.renderer = renderer;\n    this.preValue = '';\n    this.sub = {};\n  }\n  ngOnInit() {\n    this.defaultValidate();\n  }\n  ngOnDestroy() {\n    this.sub.unsubscribe();\n  }\n  defaultValidate() {\n    this.host.oninput = event => {\n      event.stopPropagation();\n      /**the most of code from @Günter Zöchbauer's answer.*/\n      /**we remove from input but:\n           @preInputValue still keep the previous value because of not setting.\n      */\n      var preInputValue = this.preValue;\n      var lastChar = preInputValue.substring(preInputValue.length - 1);\n      // remove all mask characters (keep only numeric)\n      var newVal = event.currentTarget.value.replace(/\\D/g, '');\n      let start = this.el.nativeElement.selectionStart;\n      let end = this.el.nativeElement.selectionEnd;\n      //when removed value from input\n      if (event.currentTarget.value.length < preInputValue.length) {\n        // this.message = 'Removing...'; //Just console\n        /**while removing if we encounter ) character,\n             then remove the last digit too.*/\n        if (preInputValue.length < start) {\n          if (lastChar == ')') {\n            newVal = newVal.substr(0, newVal.length - 1);\n          }\n        }\n        //if no number then flush\n        if (newVal.length == 0) {\n          newVal = '';\n        } else if (newVal.length <= 3) {\n          /**when removing, we change pattern match.\n           \"otherwise deleting of non-numeric characters is not recognized\"*/\n          newVal = newVal.replace(/^(\\d{0,3})/, '($1');\n        } else if (newVal.length <= 6) {\n          newVal = newVal.replace(/^(\\d{0,3})(\\d{0,3})/, '($1) $2');\n        } else {\n          newVal = newVal.replace(/^(\\d{0,3})(\\d{0,3})(.*)/, '($1) $2-$3');\n        }\n        this.host.value = newVal;\n        start = this.el.nativeElement.selectionStart;\n        end = this.el.nativeElement.selectionEnd;\n        //keep cursor the normal position after setting the input above.\n        this.renderer.selectRootElement(this.el).nativeElement.setSelectionRange(start, end);\n        //when typed value in input\n      } else {\n        // this.message = 'Typing...'; //Just console\n        var removedD = event.currentTarget.value.charAt(start - 1);\n        // don't show braces for empty value\n        if (newVal.length == 0) {\n          newVal = '';\n        }\n        // don't show braces for empty groups at the end\n        else if (newVal.length <= 3) {\n          newVal = newVal.replace(/^(\\d{0,3})/, '($1)');\n        } else if (newVal.length <= 6) {\n          newVal = newVal.replace(/^(\\d{0,3})(\\d{0,3})/, '($1) $2');\n        } else {\n          newVal = newVal.replace(/^(\\d{0,3})(\\d{0,3})(.*)/, '($1) $2-$3');\n        }\n        //check typing whether in middle or not\n        //in the following case, you are typing in the middle\n        if (preInputValue.length >= start) {\n          //change cursor according to special chars.\n          // console.log(start+removedD);\n          if (removedD == '(') {\n            start = start + 1;\n            end = end + 1;\n          }\n          if (removedD == ')') {\n            start = start + 2; // +2 so there is also space char after ')'.\n            end = end + 2;\n          }\n          if (removedD == '-') {\n            start = start + 1;\n            end = end + 1;\n          }\n          if (removedD == ' ') {\n            start = start + 1;\n            end = end + 1;\n          }\n          this.host.value = newVal;\n          start = this.el.nativeElement.selectionStart;\n          end = this.el.nativeElement.selectionEnd;\n          this.renderer.selectRootElement(this.el).nativeElement.setSelectionRange(start, end);\n        } else {\n          this.host.value = newVal;\n          start = this.el.nativeElement.selectionStart;\n          end = this.el.nativeElement.selectionEnd;\n          this.renderer.selectRootElement(this.el).nativeElement.setSelectionRange(start + 2, end + 2); // +2 because of wanting standard typing\n        }\n      }\n    };\n  }\n  static #_ = this.ɵfac = function DefaultMaskDirective_Factory(t) {\n    return new (t || DefaultMaskDirective)(i0.ɵɵdirectiveInject(i0.ElementRef), i0.ɵɵdirectiveInject(i0.Renderer2));\n  };\n  static #_2 = this.ɵdir = /* @__PURE__ */i0.ɵɵdefineDirective({\n    type: DefaultMaskDirective,\n    selectors: [[\"\", \"defaultMask\", \"\"]],\n    inputs: {\n      gdMask: [\"defaultMask\", \"gdMask\"],\n      PreValue: \"PreValue\"\n    }\n  });\n}\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(DefaultMaskDirective, [{\n    type: Directive,\n    args: [{\n      selector: '[defaultMask]'\n    }]\n  }], function () {\n    return [{\n      type: i0.ElementRef\n    }, {\n      type: i0.Renderer2\n    }];\n  }, {\n    gdMask: [{\n      type: Input,\n      args: ['defaultMask']\n    }],\n    PreValue: [{\n      type: Input\n    }]\n  });\n})();\n\n// https://stackblitz.com/edit/angular-ivy-uhq15j?file=src%2Fapp%2Fdirective.directive.ts\nclass NextDirective {\n  set Host(host) {\n    if (host) {\n      this.self = host;\n    }\n  }\n  blur() {\n    if (!this.controls) return;\n    this.controls.forEach((x, index) => {\n      var container = x.self.HTMLElement.getElementsByClassName('gd-input-container');\n      if (container && container.length === 1) {\n        container[0].classList.remove('gd-focus');\n      }\n    });\n  }\n  //  @HostListener('document:keydown.escape', ['$event']) \n  onKeyDown(event) {\n    this.self.CloseEditor();\n    setTimeout(() => {\n      var selfInput = this.self.HTMLElement.getElementsByClassName('input');\n      var selfInputContainer = this.self.HTMLElement.getElementsByClassName('gd-input-container');\n      if (selfInput && selfInput.length === 1 && selfInputContainer && selfInputContainer.length === 1) {\n        //  this.blur();\n        selfInputContainer[0].classList.add('gd-focus');\n        selfInput[0].focus();\n        selfInput[0].select();\n        event.preventDefault();\n        return false;\n      }\n      return;\n    }, 500);\n  }\n  onMouseDown(event) {\n    if (this.self.IsDisabled) return;\n    //    if( (event.target as HTMLElement).className === 'slider' ) return;\n    var selfInput = this.self.HTMLElement.getElementsByClassName('input');\n    var selfInputContainer = this.self.HTMLElement.getElementsByClassName('gd-input-container');\n    if (selfInput && selfInput.length === 1 && selfInputContainer && selfInputContainer.length === 1) {\n      if (!selfInputContainer[0].classList.contains('gd-focus')) {\n        this.blur();\n        setTimeout(() => {\n          selfInputContainer[0].classList.add('gd-focus');\n          selfInput[0].focus();\n          if (event.offsetX > selfInput[0].value.length) {\n            selfInput[0].select();\n          }\n          event.preventDefault();\n          return false;\n        }, 500);\n      } else {\n        selfInput[0].blur();\n      }\n    }\n  }\n  onArrowUp(event) {\n    //        if( (event.currentTarget as HTMLElement).tagName === 'GD-TEXT' )   return;\n    if (this.self.IsOpened) return;\n    if (!this.prev) return;else {\n      if (this.prev.IsDisabled) {\n        document.dispatchEvent(new KeyboardEvent('keydown', {\n          'key': 'arrowup'\n        }));\n        return;\n      }\n    }\n    var selfInput = this.self.HTMLElement.getElementsByClassName('input');\n    var prevInput = this.prev.HTMLElement.getElementsByClassName('input');\n    var selfInputContainer = this.self.HTMLElement.getElementsByClassName('gd-input-container');\n    var prevInputContainer = this.prev.HTMLElement.getElementsByClassName('gd-input-container');\n    if (selfInput && selfInput.length === 1 && prevInput && prevInput.length === 1 && selfInputContainer && selfInputContainer.length === 1 && prevInputContainer && prevInputContainer.length === 1) {\n      event.preventDefault();\n      selfInput[0].blur();\n      selfInputContainer[0].classList.remove('gd-focus');\n      prevInputContainer[0].classList.add('gd-focus');\n      prevInput[0].focus();\n      // prevInput[0].select();\n      return false;\n    }\n    return;\n  }\n  onArrowDown(event) {\n    //        if( (event.currentTarget as HTMLElement).tagName === 'GD-TEXT' ) return;\n    if (this.self.IsOpened) return false;\n    if (!this.next) return;else {\n      if (this.next.IsDisabled) {\n        document.dispatchEvent(new KeyboardEvent('keydown', {\n          'key': 'arrowdown'\n        }));\n        return;\n      }\n    }\n    var selfInput = this.self.HTMLElement?.getElementsByClassName('input');\n    var nextInput = this.next.HTMLElement?.getElementsByClassName('input');\n    var selfInputContainer = this.self.HTMLElement?.getElementsByClassName('gd-input-container');\n    var nextInputContainer = this.next.HTMLElement?.getElementsByClassName('gd-input-container');\n    if (selfInput && selfInput.length === 1 && nextInput && nextInput.length === 1 && selfInputContainer && selfInputContainer.length === 1 && nextInputContainer && nextInputContainer.length === 1) {\n      selfInput[0].blur();\n      selfInputContainer[0].classList.remove('gd-focus');\n      nextInputContainer[0].classList.add('gd-focus');\n      nextInput[0].focus();\n      //  nextInput[0].select();\n      event.preventDefault();\n      return false;\n    }\n    return;\n  }\n  static #_ = this.ɵfac = function NextDirective_Factory(t) {\n    return new (t || NextDirective)();\n  };\n  static #_2 = this.ɵdir = /* @__PURE__ */i0.ɵɵdefineDirective({\n    type: NextDirective,\n    selectors: [[\"\", \"next-tab\", \"\"]],\n    hostBindings: function NextDirective_HostBindings(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵlistener(\"keydown.escape\", function NextDirective_keydown_escape_HostBindingHandler($event) {\n          return ctx.onKeyDown($event);\n        })(\"mousedown\", function NextDirective_mousedown_HostBindingHandler($event) {\n          return ctx.onMouseDown($event);\n        })(\"keydown.arrowup\", function NextDirective_keydown_arrowup_HostBindingHandler($event) {\n          return ctx.onArrowUp($event);\n        })(\"keydown.enter\", function NextDirective_keydown_enter_HostBindingHandler($event) {\n          return ctx.onArrowDown($event);\n        })(\"keydown.arrowdown\", function NextDirective_keydown_arrowdown_HostBindingHandler($event) {\n          return ctx.onArrowDown($event);\n        });\n      }\n    },\n    inputs: {\n      Host: [\"next-tab\", \"Host\"]\n    }\n  });\n}\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(NextDirective, [{\n    type: Directive,\n    args: [{\n      selector: \"[next-tab]\"\n    }]\n  }], null, {\n    Host: [{\n      type: Input,\n      args: ['next-tab']\n    }],\n    onKeyDown: [{\n      type: HostListener,\n      args: ['keydown.escape', ['$event']]\n    }],\n    onMouseDown: [{\n      type: HostListener,\n      args: [\"mousedown\", [\"$event\"]]\n    }],\n    onArrowUp: [{\n      type: HostListener,\n      args: [\"keydown.arrowup\", [\"$event\"]]\n    }],\n    onArrowDown: [{\n      type: HostListener,\n      args: [\"keydown.enter\", [\"$event\"]]\n    }, {\n      type: HostListener,\n      args: [\"keydown.arrowdown\", [\"$event\"]]\n    }]\n  });\n})();\nclass NextManagerDirective {\n  constructor() {\n    this.controls = {};\n  }\n  ngAfterViewInit() {\n    const controls = this.controls.toArray();\n    controls.forEach((x, index) => {\n      x.prev = index ? controls[index - 1].self : null;\n      x.next = index < controls.length - 1 ? controls[index + 1].self : null;\n      x.controls = controls;\n    });\n    this.controls.changes.subscribe(ctrls => {\n      const controls = ctrls.toArray();\n      controls.forEach((x, index) => {\n        x.prev = index ? controls[index - 1].self : null;\n        x.next = index < controls.length - 1 ? controls[index + 1].self : null;\n        x.controls = controls;\n      });\n    });\n  }\n  static #_ = this.ɵfac = function NextManagerDirective_Factory(t) {\n    return new (t || NextManagerDirective)();\n  };\n  static #_2 = this.ɵdir = /* @__PURE__ */i0.ɵɵdefineDirective({\n    type: NextManagerDirective,\n    selectors: [[\"\", \"manage-arrow\", \"\"]],\n    contentQueries: function NextManagerDirective_ContentQueries(rf, ctx, dirIndex) {\n      if (rf & 1) {\n        i0.ɵɵcontentQuery(dirIndex, NextDirective, 5);\n      }\n      if (rf & 2) {\n        let _t;\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.controls = _t);\n      }\n    }\n  });\n}\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(NextManagerDirective, [{\n    type: Directive,\n    args: [{\n      selector: \"[manage-arrow]\"\n    }]\n  }], null, {\n    controls: [{\n      type: ContentChildren,\n      args: [NextDirective, {\n        descendants: true\n      }]\n    }]\n  });\n})();\nclass NoSanitizePipe {\n  constructor(domSanitizer) {\n    this.domSanitizer = domSanitizer;\n  }\n  transform(html) {\n    return this.domSanitizer.bypassSecurityTrustHtml(html);\n  }\n  static #_ = this.ɵfac = function NoSanitizePipe_Factory(t) {\n    return new (t || NoSanitizePipe)(i0.ɵɵdirectiveInject(i1.DomSanitizer, 16));\n  };\n  static #_2 = this.ɵpipe = /* @__PURE__ */i0.ɵɵdefinePipe({\n    name: \"noSanitize\",\n    type: NoSanitizePipe,\n    pure: true\n  });\n}\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(NoSanitizePipe, [{\n    type: Pipe,\n    args: [{\n      name: 'noSanitize'\n    }]\n  }], function () {\n    return [{\n      type: i1.DomSanitizer\n    }];\n  }, null);\n})();\nclass GDCommonService {\n  constructor() {\n    this.activeWindowID = '';\n    this.beforeBrowserClose$ = new EventEmitter();\n    this.openedWindows = new Array();\n    this.closeEditor$ = new EventEmitter();\n  }\n  onBeforeBrowserClose() {\n    this.beforeBrowserClose$.emit();\n  }\n  CloseEditor() {\n    this.closeEditor$.emit();\n  }\n  SetActiveWindowID(id) {\n    this.activeWindowID = id;\n  }\n  GetActiveWindowID() {\n    return this.activeWindowID;\n  }\n  OpenedWindowsManager(window, action) {\n    if (!window) return;\n    if (window.name === 'gd-tooltip') return;\n    if (window.name === 'gd-contextmenu') return;\n    if (window.name === 'editor') return;\n    if (action === 'move') {\n      window.Z = 2147483647;\n      if (window.IsModal) {\n        let parent = this.openedWindows.find(x => x.ID === window.parentID);\n        if (parent) parent.Z = 2147483647;\n      }\n      return;\n    }\n    let index = this.openedWindows.indexOf(window);\n    if (action === 'open') {\n      if (index === -1) {\n        if (!window.IsModal) {\n          window.Z = this.openedWindows.length;\n        } else {\n          let parent = this.openedWindows.find(x => x.ID === window.parentID);\n          if (parent) window.Z = parent.Z;\n        }\n        this.openedWindows.push(window);\n      }\n      return;\n    }\n    if (index > -1) {\n      let parent = null;\n      let parentIndex = -1;\n      if (window.IsModal) {\n        parent = this.openedWindows.find(x => x.ID === window.parentID);\n        parentIndex = this.openedWindows.indexOf(parent);\n        if (!parent) {\n          console.log('parent = null', window);\n          console.log(this.openedWindows);\n        }\n      }\n      this.openedWindows.splice(index, 1);\n      if (parentIndex > -1) {\n        this.openedWindows.splice(parentIndex, 1);\n      }\n      if (action !== 'close') {\n        if (window.IsModal) {\n          this.openedWindows.push(parent);\n        }\n        this.openedWindows.push(window);\n      }\n      for (let i = 0; i < this.openedWindows.length; ++i) {\n        if (!this.openedWindows[i]) continue;\n        if (this.openedWindows[i].IsModal) {\n          parent = this.openedWindows.find(x => x.ID === window.parentID);\n          window.Z = parent ? parent.Z : i;\n        } else {\n          this.openedWindows[i].Z = i;\n        }\n      }\n    }\n  }\n  static #_ = this.ɵfac = function GDCommonService_Factory(t) {\n    return new (t || GDCommonService)();\n  };\n  static #_2 = this.ɵprov = /* @__PURE__ */i0.ɵɵdefineInjectable({\n    token: GDCommonService,\n    factory: GDCommonService.ɵfac,\n    providedIn: 'root'\n  });\n}\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(GDCommonService, [{\n    type: Injectable,\n    args: [{\n      providedIn: 'root'\n    }]\n  }], function () {\n    return [];\n  }, null);\n})();\n\n// @dynamic\nclass GDObject {\n  static instanceOfArrayEditor(object) {\n    return object?.Discriminator === 'I-AM-ARRAY-EDITOR';\n  }\n  static instanceOfPG(object) {\n    return object?.Discriminator === 'I-AM-PG';\n  }\n  static instanceOfPGObject(object) {\n    return object?.Discriminator === 'I-AM-PG-OBJECT';\n  }\n  static instanceOfFilter(object) {\n    return object?.Discriminator === 'I-AM-FILTER';\n  }\n  static instanceOfTable(object) {\n    return object?.Discriminator === 'I-AM-TABLE';\n  }\n  static instanceOfGrid(object) {\n    return object?.Discriminator === 'I-AM-GRID';\n  }\n  static instanceOfGridGrouping(object) {\n    return object?.Discriminator === 'I-AM-GRID-GROUPING';\n  }\n  static #_ = this.ɵfac = function GDObject_Factory(t) {\n    return new (t || GDObject)();\n  };\n  static #_2 = this.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n    type: GDObject,\n    selectors: [[\"gd-object\"]],\n    decls: 0,\n    vars: 0,\n    template: function GDObject_Template(rf, ctx) {},\n    encapsulation: 2\n  });\n}\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(GDObject, [{\n    type: Component,\n    args: [{\n      selector: \"gd-object\",\n      template: \"\"\n    }]\n  }], null, null);\n})();\n// @dynamic\nclass IDGenerator {\n  static #_ = this.lengthID = 8;\n  static #_2 = this.timestamp = +new Date();\n  static newID() {\n    return this.generate();\n  }\n  static getRandomInt(min, max) {\n    return Math.floor(Math.random() * (max - min + 1)) + min;\n  }\n  static generate() {\n    const ts = this.timestamp.toString();\n    const parts = ts.split('').reverse();\n    let id = '';\n    for (let i = 0; i < this.lengthID; ++i) {\n      const index = this.getRandomInt(0, parts.length - 1);\n      id += parts[index];\n    }\n    return id;\n  }\n  static #_3 = this.ɵfac = function IDGenerator_Factory(t) {\n    return new (t || IDGenerator)();\n  };\n  static #_4 = this.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n    type: IDGenerator,\n    selectors: [[\"id-generator\"]],\n    decls: 0,\n    vars: 0,\n    template: function IDGenerator_Template(rf, ctx) {},\n    encapsulation: 2\n  });\n}\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(IDGenerator, [{\n    type: Component,\n    args: [{\n      selector: \"id-generator\",\n      template: \"\"\n    }]\n  }], null, null);\n})();\n// @dynamic\nclass GDCommonTools {\n  static isNumeric(val) {\n    if (isNaN(parseFloat(val))) return false;\n    return true;\n  }\n  static findRootAncestor(element) {\n    var target = element;\n    while (target.tagName.toLowerCase() !== 'gd-grid-grouping-wrapper' && target.tagName.toLowerCase() !== 'body') {\n      target = target.parentElement;\n    }\n    if (target.tagName.toLowerCase() === 'body') return null;\n    return target;\n  }\n  static findAncestor(element, className) {\n    var target = element;\n    for (var i = 0; i < className.length; ++i) {\n      while (!target.classList.contains(className[i]) && target.tagName.toLowerCase() !== 'body') {\n        target = target.parentElement;\n      }\n      if (target.tagName.toLowerCase() !== 'body') return target;\n      target = element;\n    }\n    return null;\n  }\n  static MeasureText(text, font, style, size = '12') {\n    var div = document.createElement('div');\n    div.id = 'gd-measure-text';\n    document.body.appendChild(div);\n    div.style.background = 'red';\n    div.style.position = 'absolute';\n    div.style.left = '-1000px';\n    div.style.top = '-1000px';\n    div.style.zIndex = '999999';\n    div.style.fontStyle = style;\n    div.style.padding = '0';\n    div.style.margin = '0';\n    div.style.fontSize = size;\n    div.style.fontFamily = font;\n    var maxWidth = 0;\n    var maxHeight = 0;\n    div.innerHTML = text;\n    maxWidth = Math.max(maxWidth, div.clientWidth);\n    maxHeight += div.clientHeight;\n    const result = {\n      w: maxWidth,\n      h: maxHeight\n    };\n    document.body.removeChild(div);\n    div = {};\n    return result;\n  }\n  static #_ = this.ɵfac = function GDCommonTools_Factory(t) {\n    return new (t || GDCommonTools)();\n  };\n  static #_2 = this.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n    type: GDCommonTools,\n    selectors: [[\"id-common-tools\"]],\n    decls: 0,\n    vars: 0,\n    template: function GDCommonTools_Template(rf, ctx) {},\n    encapsulation: 2\n  });\n}\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(GDCommonTools, [{\n    type: Component,\n    args: [{\n      selector: \"id-common-tools\",\n      template: \"\"\n    }]\n  }], null, null);\n})();\n// @dynamic\nclass Guid {\n  static newGuid() {\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n      const r = Math.random() * 16 | 0;\n      const v = c === 'x' ? r : r & 0x3 | 0x8;\n      return v.toString(16);\n    });\n  }\n  static Empty() {\n    return '00000000-0000-0000-0000-000000000000';\n  }\n  static #_ = this.ɵfac = function Guid_Factory(t) {\n    return new (t || Guid)();\n  };\n  static #_2 = this.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n    type: Guid,\n    selectors: [[\"guid\"]],\n    decls: 0,\n    vars: 0,\n    template: function Guid_Template(rf, ctx) {},\n    encapsulation: 2\n  });\n}\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(Guid, [{\n    type: Component,\n    args: [{\n      selector: \"guid\",\n      template: \"\"\n    }]\n  }], null, null);\n})();\nvar State;\n(function (State) {\n  State[State[\"unchanged\"] = 0] = \"unchanged\";\n  State[State[\"added\"] = 1] = \"added\";\n  State[State[\"changed\"] = 2] = \"changed\";\n  State[State[\"deleted\"] = 3] = \"deleted\";\n})(State || (State = {}));\n;\n;\n;\nvar Actions;\n(function (Actions) {\n  Actions[Actions[\"none\"] = 0] = \"none\";\n  Actions[Actions[\"search\"] = 1] = \"search\";\n  Actions[Actions[\"filter\"] = 2] = \"filter\";\n  Actions[Actions[\"inlineData\"] = 3] = \"inlineData\";\n  Actions[Actions[\"reserve0\"] = 4] = \"reserve0\";\n  Actions[Actions[\"addGroup\"] = 5] = \"addGroup\";\n  Actions[Actions[\"editGroup\"] = 7] = \"editGroup\";\n  Actions[Actions[\"addData\"] = 8] = \"addData\";\n  Actions[Actions[\"editData\"] = 9] = \"editData\";\n  Actions[Actions[\"reserve1\"] = 10] = \"reserve1\";\n  Actions[Actions[\"reserve2\"] = 11] = \"reserve2\";\n  Actions[Actions[\"delete\"] = 12] = \"delete\";\n})(Actions || (Actions = {}));\nvar Validation;\n(function (Validation) {\n  Validation[Validation[\"onServer\"] = 0] = \"onServer\";\n  Validation[Validation[\"onClient\"] = 1] = \"onClient\";\n})(Validation || (Validation = {}));\nclass IFilterData {\n  constructor() {\n    this.mode = '';\n  }\n}\nclass PGCategory {\n  constructor(name) {\n    this.isDisabled = false;\n    this.ID = IDGenerator.newID();\n    this.Name = name;\n    this.isDynamic = false;\n    this.Properties = new Array();\n  }\n}\nclass PGProperty {\n  constructor(_categoryName, _isDisabled, _name, _display, _type, _editor, _value, _tabStop) {\n    this.categoryName = _categoryName;\n    this.isDisabled = _isDisabled;\n    this.name = _name;\n    this.display = _display;\n    this.dataType = _type;\n    this.editor = _editor;\n    this.value = _value;\n    this.data = new Array();\n    this.allowDrop = [];\n    this.decimalDigits = 2;\n    this.align = 'right';\n    this.placeHolder = '0.00';\n    this.prefix = '$';\n    this.min = 0;\n    this.max = 100;\n    this.step = 1;\n    this.tabStop = _tabStop;\n  }\n}\nclass Point {\n  constructor(x, y) {\n    this.x = x;\n    this.y = y;\n  }\n}\nclass Size {\n  constructor(w, h) {\n    this.w = w;\n    this.h = h;\n  }\n}\nclass Line {\n  constructor(x1, y1, x2, y2) {\n    this.x1 = x1;\n    this.y1 = y1;\n    this.x2 = x2;\n    this.y2 = y2;\n  }\n  IsContains(point, scale) {\n    const vect = new Vector(this.x2 - this.x1, this.y2 - this.y1);\n    vect.Rotate90();\n    vect.Normalize();\n    vect.Scale(2.5);\n    const x1 = this.x1 + vect.x;\n    const y1 = this.y1 + vect.y;\n    const x2 = this.x1 - vect.x;\n    const y2 = this.y1 - vect.y;\n    const x3 = this.x2 + vect.x;\n    const y3 = this.y2 + vect.y;\n    const x4 = this.x2 - vect.x;\n    const y4 = this.y2 - vect.y;\n    const points = new Array();\n    points.push(new Point(x1, y1), new Point(x2, y2), new Point(x4, y4), new Point(x3, y3));\n    const polygon = new Polygon(points);\n    return polygon.IsContains(point);\n  }\n  IsContains1(point, scale) {\n    const vect = new Vector(this.x2 - this.x1, this.y2 - this.y1);\n    vect.Rotate90();\n    vect.Normalize();\n    vect.Scale(2 / scale);\n    const x1 = this.x1 + vect.x;\n    const y1 = this.y1 + vect.y;\n    const x2 = this.x1 - vect.x;\n    const y2 = this.y1 - vect.y;\n    const x3 = this.x2 + vect.x;\n    const y3 = this.y2 + vect.y;\n    const x4 = this.x2 - vect.x;\n    const y4 = this.y2 - vect.y;\n    const points = new Array();\n    points.push(new Point(x1, y1), new Point(x2, y2), new Point(x4, y4), new Point(x3, y3));\n    const polygon = new Polygon(points);\n    return polygon.IsContains(point);\n  }\n}\nclass Rect {\n  constructor(x, y, w, h) {\n    this.x = x;\n    this.y = y;\n    this.w = w;\n    this.h = h;\n  }\n  IsContains(point) {\n    if (point.x > this.x && point.x < this.x + this.w && point.y > this.y && point.y < this.y + this.h) return true;\n    return false;\n  }\n}\nclass Polygon {\n  constructor(points) {\n    this.points = points;\n  }\n  IsContains(point) {\n    let isIn = false;\n    if (!this.points) return isIn;\n    const x = point.x;\n    const y = point.y;\n    let i = 0;\n    let j = 0;\n    for (i = 0, j = this.points.length - 1; i < this.points.length; j = i++) {\n      //const diffX =  this.points[j].x - this.points[i].x;\n      //const diffY = (this.points[j].y - this.points[i].y) === 0 ? 1 : this.points[j].y - this.points[i].y;\n      //if( (this.points[i].y > y) !== (this.points[j].y > y) &&\n      //    (x < (diffX) * (y - this.points[i].y) / diffY + this.points[i].x) )\n      //{\n      //                isIn = ! isIn;\n      //}\n      const xi = this.points[i].x,\n        yi = this.points[i].y;\n      const xj = this.points[j].x,\n        yj = this.points[j].y;\n      var y_condition = yi > y !== yj > y;\n      var x_condition = x < (xj - xi) * (y - yi) / (yj - yi) + xi;\n      //          const intersect = ((yi > y) !== (yj > y)) && (x < (xj - xi) * (y - yi) / (yj - yi) + xi);\n      const intersect = y_condition && x_condition;\n      if (intersect) {\n        isIn = !isIn;\n      }\n    }\n    return isIn;\n  }\n}\nclass Vector {\n  constructor(x, y) {\n    if (this.isPointCore(x) && this.isPointCore(y)) {\n      this.x = y.x - x.x;\n      this.y = y.y - x.y;\n    } else {\n      this.x = x;\n      this.y = y;\n    }\n  }\n  isPointCore(obj) {\n    return obj.x !== undefined && obj.y !== undefined;\n  }\n  Rotate90() {\n    const x = this.x;\n    this.x = this.y;\n    this.y = -x;\n  }\n  RotateAroundStart(angle) {\n    if (!angle) return;\n    const nx = this.x * Math.cos(angle) - this.y * Math.sin(angle);\n    const ny = this.x * Math.sin(angle) + this.y * Math.cos(angle);\n    this.x = nx;\n    this.y = ny;\n  }\n  AngleBetween(vect) {\n    const radians = Math.atan2(this.y, this.x) - Math.atan2(vect.y, vect.x);\n    return radians * 180 / Math.PI;\n  }\n  Angle() {\n    const radians = Math.atan2(this.y, this.x);\n    return radians * 180 / Math.PI;\n  }\n  Scale(scale) {\n    this.x *= scale;\n    this.y *= scale;\n  }\n  Normalize() {\n    const result = Math.atan2(this.y, this.x);\n    this.x = Math.cos(result);\n    this.y = Math.sin(result);\n  }\n  Length() {\n    const X = this.x * this.x;\n    const Y = this.y * this.y;\n    return Math.sqrt(X + Y);\n  }\n}\nclass GDCommonModule {\n  static #_ = this.ɵfac = function GDCommonModule_Factory(t) {\n    return new (t || GDCommonModule)();\n  };\n  static #_2 = this.ɵmod = /* @__PURE__ */i0.ɵɵdefineNgModule({\n    type: GDCommonModule\n  });\n  static #_3 = this.ɵinj = /* @__PURE__ */i0.ɵɵdefineInjector({});\n}\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(GDCommonModule, [{\n    type: NgModule,\n    args: [{\n      declarations: [IDGenerator, Guid, NoSanitizePipe, FocusDirective, NextDirective, NextManagerDirective, GDDragableDirective, GDDroppableDirective],\n      imports: [],\n      exports: [IDGenerator, Guid, NoSanitizePipe, FocusDirective, NextDirective, NextManagerDirective, GDDragableDirective, GDDroppableDirective]\n    }]\n  }], null, null);\n})();\n\n/*\n * Public API Surface of gd-common\n */\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { Actions, DefaultMaskDirective, DisableDirective, FocusDirective, GDCommonModule, GDCommonService, GDCommonTools, GDDragableDirective, GDDroppableDirective, GDObject, Guid, IDGenerator, IFilterData, Line, NextDirective, NextManagerDirective, NoSanitizePipe, PGCategory, PGProperty, Point, Polygon, Rect, Size, State, Validation, Vector };","map":{"version":3,"names":["i0","Directive","Input","Injectable","HostBinding","HostListener","EventEmitter","Output","ContentChildren","Pipe","Component","NgModule","i1","DISABLED","APP_DISABLED","TAB_INDEX","TAG_ANCHOR","DisableDirective","constructor","eleRef","renderer","appDisable","ngOnChanges","disableElement","nativeElement","ngAfterViewInit","element","hasAttribute","setAttribute","tagName","toLowerCase","getAttribute","removeAttribute","children","ele","_","ɵfac","DisableDirective_Factory","t","ɵɵdirectiveInject","ElementRef","Renderer2","_2","ɵdir","ɵɵdefineDirective","type","selectors","inputs","features","ɵɵNgOnChangesFeature","ngDevMode","ɵsetClassMetadata","args","selector","GDDragService","source","startDrag","component","name","parentID","getSource","accepts","data","x","y","instance","target","IsAcceptDrop","GDDragService_Factory","ɵprov","ɵɵdefineInjectable","token","factory","providedIn","GDDraggable","id","textToShow","action","GDDragableDirective","dragService","parent","isDragValid","dragTypes","item","draggable","gdDraggable","onDragStart","event","isValid","dragData","crt","document","getElementById","cloneNode","innerHTML","style","position","top","body","appendChild","dataTransfer","setDragImage","setData","JSON","stringify","preventDefault","sleep","milliseconds","start","Date","getTime","i","GDDragableDirective_Factory","hostVars","hostBindings","GDDragableDirective_HostBindings","rf","ctx","ɵɵlistener","GDDragableDirective_dragstart_HostBindingHandler","$event","ɵɵhostProperty","GDDroppableDirective","gdDroppable","el","ngZone","gdDrop","ngOnInit","runOutsideAngular","addEventListener","onDrop","bind","onDragOver","onDragEnter","onDragLeave","json","getData","parse","offsetX","offsetY","next","stopPropagation","isAllowed","clientX","clientY","dropEffect","GDDroppableDirective_Factory","NgZone","outputs","FocusDirective","hostElement","editor","setTimeout","focus","FocusDirective_Factory","DefaultMaskDirective","gdMask","host","PreValue","value","preValue","sub","defaultValidate","ngOnDestroy","unsubscribe","oninput","preInputValue","lastChar","substring","length","newVal","currentTarget","replace","selectionStart","end","selectionEnd","substr","selectRootElement","setSelectionRange","removedD","charAt","DefaultMaskDirective_Factory","NextDirective","Host","self","blur","controls","forEach","index","container","HTMLElement","getElementsByClassName","classList","remove","onKeyDown","CloseEditor","selfInput","selfInputContainer","add","select","onMouseDown","IsDisabled","contains","onArrowUp","IsOpened","prev","dispatchEvent","KeyboardEvent","prevInput","prevInputContainer","onArrowDown","nextInput","nextInputContainer","NextDirective_Factory","NextDirective_HostBindings","NextDirective_keydown_escape_HostBindingHandler","NextDirective_mousedown_HostBindingHandler","NextDirective_keydown_arrowup_HostBindingHandler","NextDirective_keydown_enter_HostBindingHandler","NextDirective_keydown_arrowdown_HostBindingHandler","NextManagerDirective","toArray","changes","subscribe","ctrls","NextManagerDirective_Factory","contentQueries","NextManagerDirective_ContentQueries","dirIndex","ɵɵcontentQuery","_t","ɵɵqueryRefresh","ɵɵloadQuery","descendants","NoSanitizePipe","domSanitizer","transform","html","bypassSecurityTrustHtml","NoSanitizePipe_Factory","DomSanitizer","ɵpipe","ɵɵdefinePipe","pure","GDCommonService","activeWindowID","beforeBrowserClose$","openedWindows","Array","closeEditor$","onBeforeBrowserClose","emit","SetActiveWindowID","GetActiveWindowID","OpenedWindowsManager","window","Z","IsModal","find","ID","indexOf","push","parentIndex","console","log","splice","GDCommonService_Factory","GDObject","instanceOfArrayEditor","object","Discriminator","instanceOfPG","instanceOfPGObject","instanceOfFilter","instanceOfTable","instanceOfGrid","instanceOfGridGrouping","GDObject_Factory","ɵcmp","ɵɵdefineComponent","decls","vars","template","GDObject_Template","encapsulation","IDGenerator","lengthID","timestamp","newID","generate","getRandomInt","min","max","Math","floor","random","ts","toString","parts","split","reverse","_3","IDGenerator_Factory","_4","IDGenerator_Template","GDCommonTools","isNumeric","val","isNaN","parseFloat","findRootAncestor","parentElement","findAncestor","className","MeasureText","text","font","size","div","createElement","background","left","zIndex","fontStyle","padding","margin","fontSize","fontFamily","maxWidth","maxHeight","clientWidth","clientHeight","result","w","h","removeChild","GDCommonTools_Factory","GDCommonTools_Template","Guid","newGuid","c","r","v","Empty","Guid_Factory","Guid_Template","State","Actions","Validation","IFilterData","mode","PGCategory","isDisabled","Name","isDynamic","Properties","PGProperty","_categoryName","_isDisabled","_name","_display","_type","_editor","_value","_tabStop","categoryName","display","dataType","allowDrop","decimalDigits","align","placeHolder","prefix","step","tabStop","Point","Size","Line","x1","y1","x2","y2","IsContains","point","scale","vect","Vector","Rotate90","Normalize","Scale","x3","y3","x4","y4","points","polygon","Polygon","IsContains1","Rect","isIn","j","xi","yi","xj","yj","y_condition","x_condition","intersect","isPointCore","obj","undefined","RotateAroundStart","angle","nx","cos","sin","ny","AngleBetween","radians","atan2","PI","Angle","Length","X","Y","sqrt","GDCommonModule","GDCommonModule_Factory","ɵmod","ɵɵdefineNgModule","ɵinj","ɵɵdefineInjector","declarations","imports","exports"],"sources":["C:/Users/dovga/source/repos/gd-window-example/node_modules/gd-common/fesm2022/gd-common.mjs"],"sourcesContent":["import * as i0 from '@angular/core';\nimport { Directive, Input, Injectable, HostBinding, HostListener, EventEmitter, Output, ContentChildren, Pipe, Component, NgModule } from '@angular/core';\nimport * as i1 from '@angular/platform-browser';\n\nconst DISABLED = 'disabled';\nconst APP_DISABLED = 'app-disabled';\nconst TAB_INDEX = 'tabindex';\nconst TAG_ANCHOR = 'a';\nclass DisableDirective {\n    constructor(eleRef, renderer) {\n        this.eleRef = eleRef;\n        this.renderer = renderer;\n        this.appDisable = true;\n    }\n    ngOnChanges() {\n        this.disableElement(this.eleRef.nativeElement);\n    }\n    ngAfterViewInit() {\n        this.disableElement(this.eleRef.nativeElement);\n    }\n    disableElement(element) {\n        if (this.appDisable) {\n            if (!element.hasAttribute(DISABLED)) {\n                this.renderer.setAttribute(element, APP_DISABLED, '');\n                this.renderer.setAttribute(element, DISABLED, 'true');\n                // disabling anchor tab keyboard event\n                if (element.tagName.toLowerCase() === TAG_ANCHOR) {\n                    this.renderer.setAttribute(element, TAB_INDEX, '-1');\n                }\n            }\n        }\n        else {\n            if (element.hasAttribute(APP_DISABLED)) {\n                if (element.getAttribute('disabled') !== '') {\n                    element.removeAttribute(DISABLED);\n                }\n                element.removeAttribute(APP_DISABLED);\n                if (element.tagName.toLowerCase() === TAG_ANCHOR) {\n                    element.removeAttribute(TAB_INDEX);\n                }\n            }\n        }\n        if (element.children) {\n            for (let ele of element.children) {\n                this.disableElement(ele);\n            }\n        }\n    }\n    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"16.2.10\", ngImport: i0, type: DisableDirective, deps: [{ token: i0.ElementRef }, { token: i0.Renderer2 }], target: i0.ɵɵFactoryTarget.Directive }); }\n    static { this.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: \"14.0.0\", version: \"16.2.10\", type: DisableDirective, selector: \"[appDisable]\", inputs: { appDisable: \"appDisable\" }, usesOnChanges: true, ngImport: i0 }); }\n}\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"16.2.10\", ngImport: i0, type: DisableDirective, decorators: [{\n            type: Directive,\n            args: [{\n                    selector: '[appDisable]'\n                }]\n        }], ctorParameters: function () { return [{ type: i0.ElementRef }, { type: i0.Renderer2 }]; }, propDecorators: { appDisable: [{\n                type: Input\n            }] } });\n\nclass GDDragService {\n    constructor() {\n        this.source = {};\n    }\n    startDrag(component, name, parentID, type) {\n        this.source['component'] = component;\n        this.source['name'] = name;\n        this.source['parentID'] = parentID;\n        this.source['type'] = type;\n    }\n    getSource() {\n        return this.source['instance'];\n    }\n    accepts(data, x, y) {\n        if (!data)\n            return false;\n        if (!data.instance)\n            return false;\n        var target = data.instance;\n        return target.IsAcceptDrop(data, this.source, x, y);\n    }\n    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"16.2.10\", ngImport: i0, type: GDDragService, deps: [], target: i0.ɵɵFactoryTarget.Injectable }); }\n    static { this.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"16.2.10\", ngImport: i0, type: GDDragService, providedIn: 'root' }); }\n}\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"16.2.10\", ngImport: i0, type: GDDragService, decorators: [{\n            type: Injectable,\n            args: [{\n                    providedIn: 'root'\n                }]\n        }] });\n\nclass GDDraggable {\n    constructor() {\n        this.component = '';\n        this.id = '';\n        this.name = '';\n        this.type = '';\n        this.textToShow = '';\n        this.action = '';\n    }\n}\nclass GDDragableDirective {\n    constructor(dragService) {\n        this.dragService = dragService;\n        this.data = {\n            component: '',\n            id: '',\n            name: '',\n            parent: null,\n            instance: null,\n            isDragValid: null,\n            dragTypes: [],\n            item: null,\n            type: '',\n            textToShow: '',\n            action: ''\n        };\n    }\n    get draggable() { return true; }\n    set gdDraggable(data) {\n        if (data) {\n            this.data = data;\n        }\n    }\n    onDragStart(event) {\n        if (!this.data.instance)\n            return false;\n        var isValid = this.data.instance[this.data.isDragValid](this.data.dragTypes);\n        if (!isValid)\n            return false;\n        var dragData = new GDDraggable();\n        dragData.component = this.data.component;\n        dragData.id = this.data.id;\n        dragData.name = this.data.name;\n        dragData.action = this.data.action;\n        dragData.type = this.data.instance[this.data.type](this.data.data);\n        dragData.data = this.data.instance[this.data.item](this.data.data);\n        dragData.textToShow = this.data.instance[this.data.textToShow](this.data.data);\n        var crt = document.getElementById('gd-dragable');\n        if (!crt) {\n            crt = event.target.cloneNode(true);\n            crt.id = 'gd-dragable';\n            crt.innerHTML = `<div>\r\n                                                                <span style=\"color:#f00; font-size:18px\">+</span>\r\n                                                                <span style=\"color:#000; font-size:18px\">${dragData.textToShow}</span>\r\n                                                            </div>`;\n            crt.style.position = 'absolute';\n            crt.style.top = '-60px';\n            document.body.appendChild(crt);\n        }\n        else {\n            crt.innerHTML = `<div style=\"color:#000; font-size:18px\">${dragData.textToShow}</div>`;\n        }\n        event.dataTransfer.setDragImage(crt, -26, 0);\n        event.dataTransfer.setData('Text', JSON.stringify(dragData));\n        var parentID = this.data.instance[this.data.parent](this.data.data);\n        this.dragService.startDrag(this.data.component, this.data.name, parentID, dragData.type);\n        event.preventDefault();\n        return true;\n    }\n    sleep(milliseconds) {\n        var start = new Date().getTime();\n        for (var i = 0; i < 1e7; ++i) {\n            if ((new Date().getTime() - start) > milliseconds)\n                break;\n        }\n    }\n    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"16.2.10\", ngImport: i0, type: GDDragableDirective, deps: [{ token: GDDragService }], target: i0.ɵɵFactoryTarget.Directive }); }\n    static { this.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: \"14.0.0\", version: \"16.2.10\", type: GDDragableDirective, selector: \"[gd-draggable]\", inputs: { gdDraggable: [\"gd-draggable\", \"gdDraggable\"] }, host: { listeners: { \"dragstart\": \"onDragStart($event)\" }, properties: { \"draggable\": \"this.draggable\" } }, ngImport: i0 }); }\n}\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"16.2.10\", ngImport: i0, type: GDDragableDirective, decorators: [{\n            type: Directive,\n            args: [{\n                    selector: '[gd-draggable]'\n                }]\n        }], ctorParameters: function () { return [{ type: GDDragService }]; }, propDecorators: { draggable: [{\n                type: HostBinding,\n                args: ['draggable']\n            }], gdDraggable: [{\n                type: Input,\n                args: ['gd-draggable']\n            }], onDragStart: [{\n                type: HostListener,\n                args: ['dragstart', ['$event']]\n            }] } });\n\nclass GDDroppableDirective {\n    set gdDroppable(data) {\n        if (data) {\n            this.data = data;\n        }\n    }\n    constructor(el, ngZone, dragService) {\n        this.el = el;\n        this.ngZone = ngZone;\n        this.dragService = dragService;\n        this.data = null;\n        this.gdDrop = new EventEmitter();\n    }\n    ngOnInit() {\n        this.ngZone.runOutsideAngular(() => {\n            this.el.nativeElement.addEventListener('drop', this.onDrop.bind(this));\n            this.el.nativeElement.addEventListener('dragover', this.onDragOver.bind(this));\n            this.el.nativeElement.addEventListener('dragenter', this.onDragEnter.bind(this));\n            this.el.nativeElement.addEventListener('dragleave', this.onDragLeave.bind(this));\n        });\n    }\n    ngAfterViewInit() {\n        // const drop$  = fromEvent( this.el.nativeElement, \"drop\"      );\n        // const leave$ = fromEvent( this.el.nativeElement, \"dragleave\" );    \n        // const enter$ = fromEvent( this.el.nativeElement, \"dragenter\" );    \n        // const over$  = fromEvent( this.el.nativeElement, \"dragover\"  );    \n        // const stopConditions$ = merge( leave$ );\n        // enter$.pipe( debounceTime( 10 ), takeUntil(stopConditions$), repeat() ).subscribe( (event:any) => \n        // {\n        //     console.log('enter');\n        //     return false;\n        // });       \n        // leave$.pipe( debounceTime( 10 ), takeUntil(stopConditions$), repeat() ).subscribe( (event:any) => \n        // {\n        //     console.log('leave');\n        //     return false;\n        // });       \n        // drop$.pipe( debounceTime( 10 ), takeUntil(stopConditions$), repeat() ).subscribe( (event:any) => \n        // {\n        //     console.log('drop');\n        //     if( ! event.dataTransfer ) return false;\n        //     var json = event.dataTransfer.getData('Text');\n        //     if( json[0] !== '{' ) return false;\n        //     var                                              data = JSON.parse( json );\n        //                                                      data.data.x = event.offsetX; \n        //                                                      data.data.y = event.offsetY; \n        //     this.gdDrop.next( { target : this.data, source : data } );        \n        //     event.preventDefault();\n        //     return false;\n        // });       \n        // over$.pipe( debounceTime( 100 ), takeUntil(stopConditions$), repeat() ).subscribe( (event:any) => \n        // {\n        //     console.log('over');\n        //     if( ! this.data ) \n        //     {\n        //         event.stopPropagation();\n        //         return false;\n        //     }\n        //     var isAllowed = this.dragService.accepts( this.data, event.clientX, event.clientY );\n        //     console.log(isAllowed);\n        //     if( isAllowed ) \n        //     {\n        //         event.preventDefault();\n        //     }\n        //     return false;\n        // });       \n    }\n    onDrop(event) {\n        if (!event.dataTransfer)\n            return false;\n        var json = event.dataTransfer.getData('Text');\n        if (json[0] !== '{')\n            return false;\n        var data = JSON.parse(json);\n        data.data.x = event.offsetX;\n        data.data.y = event.offsetY;\n        this.gdDrop.next({ target: this.data, source: data });\n        event.preventDefault();\n        return false;\n    }\n    onDragOver(event) {\n        if (!this.data) {\n            event.stopPropagation();\n            return false;\n        }\n        var isAllowed = this.dragService.accepts(this.data, event.clientX, event.clientY);\n        if (isAllowed) {\n            event.dataTransfer.dropEffect = 'move';\n            event.preventDefault();\n        }\n        return false;\n    }\n    onDragEnter(event) {\n        event.dataTransfer.dropEffect = 'move';\n        event.preventDefault();\n        return false;\n    }\n    onDragLeave(event) {\n        event.dataTransfer.dropEffect = 'move';\n        event.preventDefault();\n        return false;\n    }\n    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"16.2.10\", ngImport: i0, type: GDDroppableDirective, deps: [{ token: i0.ElementRef }, { token: i0.NgZone }, { token: GDDragService }], target: i0.ɵɵFactoryTarget.Directive }); }\n    static { this.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: \"14.0.0\", version: \"16.2.10\", type: GDDroppableDirective, selector: \"[gd-droppable]\", inputs: { gdDroppable: [\"gd-droppable\", \"gdDroppable\"] }, outputs: { gdDrop: \"gd-drop\" }, ngImport: i0 }); }\n}\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"16.2.10\", ngImport: i0, type: GDDroppableDirective, decorators: [{\n            type: Directive,\n            args: [{\n                    selector: '[gd-droppable]'\n                }]\n        }], ctorParameters: function () { return [{ type: i0.ElementRef }, { type: i0.NgZone }, { type: GDDragService }]; }, propDecorators: { gdDroppable: [{\n                type: Input,\n                args: ['gd-droppable']\n            }], gdDrop: [{\n                type: Output,\n                args: ['gd-drop']\n            }] } });\n\nclass FocusDirective {\n    constructor(hostElement) {\n        this.hostElement = hostElement;\n        this.editor = '';\n    }\n    ngOnInit() {\n        switch (this.editor) {\n            case 'color':\n                {\n                    setTimeout(() => {\n                        this.hostElement.nativeElement.children[0].children[0].children[2].children[0].focus();\n                    }, 250);\n                }\n                break;\n            case 'autocomplete':\n            case 'combobox':\n            case 'date':\n            case 'slider':\n                {\n                    setTimeout(() => {\n                        //  this.hostElement.nativeElement.children[0].children[0].children[1].children[0].focus(); \n                    }, 250);\n                }\n                break;\n            default:\n                {\n                    setTimeout(() => {\n                        // console.log( this.hostElement.nativeElement.children[0].children[0].children[2].children[0] );\n                        //  this.hostElement.nativeElement.children[0].children[0].children[0].focus();\n                    }, 250);\n                }\n                break;\n        }\n    }\n    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"16.2.10\", ngImport: i0, type: FocusDirective, deps: [{ token: i0.ElementRef }], target: i0.ɵɵFactoryTarget.Directive }); }\n    static { this.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: \"14.0.0\", version: \"16.2.10\", type: FocusDirective, selector: \"[setFocus]\", inputs: { editor: [\"setFocus\", \"editor\"] }, ngImport: i0 }); }\n}\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"16.2.10\", ngImport: i0, type: FocusDirective, decorators: [{\n            type: Directive,\n            args: [{ selector: '[setFocus]' }]\n        }], ctorParameters: function () { return [{ type: i0.ElementRef }]; }, propDecorators: { editor: [{\n                type: Input,\n                args: ['setFocus']\n            }] } });\n\nclass DefaultMaskDirective {\n    set gdMask(host) {\n        if (host) {\n            this.host = host;\n        }\n    }\n    set PreValue(value) { this.preValue = value; }\n    constructor(el, renderer) {\n        this.el = el;\n        this.renderer = renderer;\n        this.preValue = '';\n        this.sub = {};\n    }\n    ngOnInit() {\n        this.defaultValidate();\n    }\n    ngOnDestroy() {\n        this.sub.unsubscribe();\n    }\n    defaultValidate() {\n        this.host.oninput = (event) => {\n            event.stopPropagation();\n            /**the most of code from @Günter Zöchbauer's answer.*/\n            /**we remove from input but:\n                 @preInputValue still keep the previous value because of not setting.\n            */\n            var preInputValue = this.preValue;\n            var lastChar = preInputValue.substring(preInputValue.length - 1);\n            // remove all mask characters (keep only numeric)\n            var newVal = event.currentTarget.value.replace(/\\D/g, '');\n            let start = this.el.nativeElement.selectionStart;\n            let end = this.el.nativeElement.selectionEnd;\n            //when removed value from input\n            if (event.currentTarget.value.length < preInputValue.length) {\n                // this.message = 'Removing...'; //Just console\n                /**while removing if we encounter ) character,\n                     then remove the last digit too.*/\n                if (preInputValue.length < start) {\n                    if (lastChar == ')') {\n                        newVal = newVal.substr(0, newVal.length - 1);\n                    }\n                }\n                //if no number then flush\n                if (newVal.length == 0) {\n                    newVal = '';\n                }\n                else if (newVal.length <= 3) {\n                    /**when removing, we change pattern match.\n                     \"otherwise deleting of non-numeric characters is not recognized\"*/\n                    newVal = newVal.replace(/^(\\d{0,3})/, '($1');\n                }\n                else if (newVal.length <= 6) {\n                    newVal = newVal.replace(/^(\\d{0,3})(\\d{0,3})/, '($1) $2');\n                }\n                else {\n                    newVal = newVal.replace(/^(\\d{0,3})(\\d{0,3})(.*)/, '($1) $2-$3');\n                }\n                this.host.value = newVal;\n                start = this.el.nativeElement.selectionStart;\n                end = this.el.nativeElement.selectionEnd;\n                //keep cursor the normal position after setting the input above.\n                this.renderer.selectRootElement(this.el).nativeElement.setSelectionRange(start, end);\n                //when typed value in input\n            }\n            else {\n                // this.message = 'Typing...'; //Just console\n                var removedD = event.currentTarget.value.charAt(start - 1);\n                // don't show braces for empty value\n                if (newVal.length == 0) {\n                    newVal = '';\n                }\n                // don't show braces for empty groups at the end\n                else if (newVal.length <= 3) {\n                    newVal = newVal.replace(/^(\\d{0,3})/, '($1)');\n                }\n                else if (newVal.length <= 6) {\n                    newVal = newVal.replace(/^(\\d{0,3})(\\d{0,3})/, '($1) $2');\n                }\n                else {\n                    newVal = newVal.replace(/^(\\d{0,3})(\\d{0,3})(.*)/, '($1) $2-$3');\n                }\n                //check typing whether in middle or not\n                //in the following case, you are typing in the middle\n                if (preInputValue.length >= start) {\n                    //change cursor according to special chars.\n                    // console.log(start+removedD);\n                    if (removedD == '(') {\n                        start = start + 1;\n                        end = end + 1;\n                    }\n                    if (removedD == ')') {\n                        start = start + 2; // +2 so there is also space char after ')'.\n                        end = end + 2;\n                    }\n                    if (removedD == '-') {\n                        start = start + 1;\n                        end = end + 1;\n                    }\n                    if (removedD == ' ') {\n                        start = start + 1;\n                        end = end + 1;\n                    }\n                    this.host.value = newVal;\n                    start = this.el.nativeElement.selectionStart;\n                    end = this.el.nativeElement.selectionEnd;\n                    this.renderer.selectRootElement(this.el).nativeElement.setSelectionRange(start, end);\n                }\n                else {\n                    this.host.value = newVal;\n                    start = this.el.nativeElement.selectionStart;\n                    end = this.el.nativeElement.selectionEnd;\n                    this.renderer.selectRootElement(this.el).nativeElement.setSelectionRange(start + 2, end + 2); // +2 because of wanting standard typing\n                }\n            }\n        };\n    }\n    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"16.2.10\", ngImport: i0, type: DefaultMaskDirective, deps: [{ token: i0.ElementRef }, { token: i0.Renderer2 }], target: i0.ɵɵFactoryTarget.Directive }); }\n    static { this.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: \"14.0.0\", version: \"16.2.10\", type: DefaultMaskDirective, selector: \"[defaultMask]\", inputs: { gdMask: [\"defaultMask\", \"gdMask\"], PreValue: \"PreValue\" }, ngImport: i0 }); }\n}\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"16.2.10\", ngImport: i0, type: DefaultMaskDirective, decorators: [{\n            type: Directive,\n            args: [{\n                    selector: '[defaultMask]'\n                }]\n        }], ctorParameters: function () { return [{ type: i0.ElementRef }, { type: i0.Renderer2 }]; }, propDecorators: { gdMask: [{\n                type: Input,\n                args: ['defaultMask']\n            }], PreValue: [{\n                type: Input\n            }] } });\n\n// https://stackblitz.com/edit/angular-ivy-uhq15j?file=src%2Fapp%2Fdirective.directive.ts\nclass NextDirective {\n    set Host(host) {\n        if (host) {\n            this.self = host;\n        }\n    }\n    blur() {\n        if (!this.controls)\n            return;\n        this.controls.forEach((x, index) => {\n            var container = x.self.HTMLElement.getElementsByClassName('gd-input-container');\n            if (container && container.length === 1) {\n                container[0].classList.remove('gd-focus');\n            }\n        });\n    }\n    //  @HostListener('document:keydown.escape', ['$event']) \n    onKeyDown(event) {\n        this.self.CloseEditor();\n        setTimeout(() => {\n            var selfInput = this.self.HTMLElement.getElementsByClassName('input');\n            var selfInputContainer = this.self.HTMLElement.getElementsByClassName('gd-input-container');\n            if (selfInput && selfInput.length === 1 &&\n                selfInputContainer && selfInputContainer.length === 1) {\n                //  this.blur();\n                selfInputContainer[0].classList.add('gd-focus');\n                selfInput[0].focus();\n                selfInput[0].select();\n                event.preventDefault();\n                return false;\n            }\n            return;\n        }, 500);\n    }\n    onMouseDown(event) {\n        if (this.self.IsDisabled)\n            return;\n        //    if( (event.target as HTMLElement).className === 'slider' ) return;\n        var selfInput = this.self.HTMLElement.getElementsByClassName('input');\n        var selfInputContainer = this.self.HTMLElement.getElementsByClassName('gd-input-container');\n        if (selfInput && selfInput.length === 1 &&\n            selfInputContainer && selfInputContainer.length === 1) {\n            if (!selfInputContainer[0].classList.contains('gd-focus')) {\n                this.blur();\n                setTimeout(() => {\n                    selfInputContainer[0].classList.add('gd-focus');\n                    selfInput[0].focus();\n                    if (event.offsetX > selfInput[0].value.length) {\n                        selfInput[0].select();\n                    }\n                    event.preventDefault();\n                    return false;\n                }, 500);\n            }\n            else {\n                selfInput[0].blur();\n            }\n        }\n    }\n    onArrowUp(event) {\n        //        if( (event.currentTarget as HTMLElement).tagName === 'GD-TEXT' )   return;\n        if (this.self.IsOpened)\n            return;\n        if (!this.prev)\n            return;\n        else {\n            if (this.prev.IsDisabled) {\n                document.dispatchEvent(new KeyboardEvent('keydown', { 'key': 'arrowup' }));\n                return;\n            }\n        }\n        var selfInput = this.self.HTMLElement.getElementsByClassName('input');\n        var prevInput = this.prev.HTMLElement.getElementsByClassName('input');\n        var selfInputContainer = this.self.HTMLElement.getElementsByClassName('gd-input-container');\n        var prevInputContainer = this.prev.HTMLElement.getElementsByClassName('gd-input-container');\n        if (selfInput && selfInput.length === 1 &&\n            prevInput && prevInput.length === 1 &&\n            selfInputContainer && selfInputContainer.length === 1 &&\n            prevInputContainer && prevInputContainer.length === 1) {\n            event.preventDefault();\n            selfInput[0].blur();\n            selfInputContainer[0].classList.remove('gd-focus');\n            prevInputContainer[0].classList.add('gd-focus');\n            prevInput[0].focus();\n            // prevInput[0].select();\n            return false;\n        }\n        return;\n    }\n    onArrowDown(event) {\n        //        if( (event.currentTarget as HTMLElement).tagName === 'GD-TEXT' ) return;\n        if (this.self.IsOpened)\n            return false;\n        if (!this.next)\n            return;\n        else {\n            if (this.next.IsDisabled) {\n                document.dispatchEvent(new KeyboardEvent('keydown', { 'key': 'arrowdown' }));\n                return;\n            }\n        }\n        var selfInput = this.self.HTMLElement?.getElementsByClassName('input');\n        var nextInput = this.next.HTMLElement?.getElementsByClassName('input');\n        var selfInputContainer = this.self.HTMLElement?.getElementsByClassName('gd-input-container');\n        var nextInputContainer = this.next.HTMLElement?.getElementsByClassName('gd-input-container');\n        if (selfInput && selfInput.length === 1 &&\n            nextInput && nextInput.length === 1 &&\n            selfInputContainer && selfInputContainer.length === 1 &&\n            nextInputContainer && nextInputContainer.length === 1) {\n            selfInput[0].blur();\n            selfInputContainer[0].classList.remove('gd-focus');\n            nextInputContainer[0].classList.add('gd-focus');\n            nextInput[0].focus();\n            //  nextInput[0].select();\n            event.preventDefault();\n            return false;\n        }\n        return;\n    }\n    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"16.2.10\", ngImport: i0, type: NextDirective, deps: [], target: i0.ɵɵFactoryTarget.Directive }); }\n    static { this.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: \"14.0.0\", version: \"16.2.10\", type: NextDirective, selector: \"[next-tab]\", inputs: { Host: [\"next-tab\", \"Host\"] }, host: { listeners: { \"keydown.escape\": \"onKeyDown($event)\", \"mousedown\": \"onMouseDown($event)\", \"keydown.arrowup\": \"onArrowUp($event)\", \"keydown.enter\": \"onArrowDown($event)\", \"keydown.arrowdown\": \"onArrowDown($event)\" } }, ngImport: i0 }); }\n}\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"16.2.10\", ngImport: i0, type: NextDirective, decorators: [{\n            type: Directive,\n            args: [{\n                    selector: \"[next-tab]\"\n                }]\n        }], propDecorators: { Host: [{\n                type: Input,\n                args: ['next-tab']\n            }], onKeyDown: [{\n                type: HostListener,\n                args: ['keydown.escape', ['$event']]\n            }], onMouseDown: [{\n                type: HostListener,\n                args: [\"mousedown\", [\"$event\"]]\n            }], onArrowUp: [{\n                type: HostListener,\n                args: [\"keydown.arrowup\", [\"$event\"]]\n            }], onArrowDown: [{\n                type: HostListener,\n                args: [\"keydown.enter\", [\"$event\"]]\n            }, {\n                type: HostListener,\n                args: [\"keydown.arrowdown\", [\"$event\"]]\n            }] } });\n\nclass NextManagerDirective {\n    constructor() {\n        this.controls = {};\n    }\n    ngAfterViewInit() {\n        const controls = this.controls.toArray();\n        controls.forEach((x, index) => {\n            x.prev = index ? controls[index - 1].self : null;\n            x.next = index < controls.length - 1 ? controls[index + 1].self : null;\n            x.controls = controls;\n        });\n        this.controls.changes.subscribe(ctrls => {\n            const controls = ctrls.toArray();\n            controls.forEach((x, index) => {\n                x.prev = index ? controls[index - 1].self : null;\n                x.next = index < controls.length - 1 ? controls[index + 1].self : null;\n                x.controls = controls;\n            });\n        });\n    }\n    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"16.2.10\", ngImport: i0, type: NextManagerDirective, deps: [], target: i0.ɵɵFactoryTarget.Directive }); }\n    static { this.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: \"14.0.0\", version: \"16.2.10\", type: NextManagerDirective, selector: \"[manage-arrow]\", queries: [{ propertyName: \"controls\", predicate: NextDirective, descendants: true }], ngImport: i0 }); }\n}\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"16.2.10\", ngImport: i0, type: NextManagerDirective, decorators: [{\n            type: Directive,\n            args: [{\n                    selector: \"[manage-arrow]\"\n                }]\n        }], propDecorators: { controls: [{\n                type: ContentChildren,\n                args: [NextDirective, { descendants: true }]\n            }] } });\n\nclass NoSanitizePipe {\n    constructor(domSanitizer) {\n        this.domSanitizer = domSanitizer;\n    }\n    transform(html) {\n        return this.domSanitizer.bypassSecurityTrustHtml(html);\n    }\n    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"16.2.10\", ngImport: i0, type: NoSanitizePipe, deps: [{ token: i1.DomSanitizer }], target: i0.ɵɵFactoryTarget.Pipe }); }\n    static { this.ɵpipe = i0.ɵɵngDeclarePipe({ minVersion: \"14.0.0\", version: \"16.2.10\", ngImport: i0, type: NoSanitizePipe, name: \"noSanitize\" }); }\n}\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"16.2.10\", ngImport: i0, type: NoSanitizePipe, decorators: [{\n            type: Pipe,\n            args: [{ name: 'noSanitize' }]\n        }], ctorParameters: function () { return [{ type: i1.DomSanitizer }]; } });\n\nclass GDCommonService {\n    constructor() {\n        this.activeWindowID = '';\n        this.beforeBrowserClose$ = new EventEmitter();\n        this.openedWindows = new Array();\n        this.closeEditor$ = new EventEmitter();\n    }\n    onBeforeBrowserClose() { this.beforeBrowserClose$.emit(); }\n    CloseEditor() { this.closeEditor$.emit(); }\n    SetActiveWindowID(id) {\n        this.activeWindowID = id;\n    }\n    GetActiveWindowID() {\n        return this.activeWindowID;\n    }\n    OpenedWindowsManager(window, action) {\n        if (!window)\n            return;\n        if (window.name === 'gd-tooltip')\n            return;\n        if (window.name === 'gd-contextmenu')\n            return;\n        if (window.name === 'editor')\n            return;\n        if (action === 'move') {\n            window.Z = 2147483647;\n            if (window.IsModal) {\n                let parent = this.openedWindows.find((x) => x.ID === window.parentID);\n                if (parent)\n                    parent.Z = 2147483647;\n            }\n            return;\n        }\n        let index = this.openedWindows.indexOf(window);\n        if (action === 'open') {\n            if (index === -1) {\n                if (!window.IsModal) {\n                    window.Z = this.openedWindows.length;\n                }\n                else {\n                    let parent = this.openedWindows.find((x) => x.ID === window.parentID);\n                    if (parent)\n                        window.Z = parent.Z;\n                }\n                this.openedWindows.push(window);\n            }\n            return;\n        }\n        if (index > -1) {\n            let parent = null;\n            let parentIndex = -1;\n            if (window.IsModal) {\n                parent = this.openedWindows.find((x) => x.ID === window.parentID);\n                parentIndex = this.openedWindows.indexOf(parent);\n                if (!parent) {\n                    console.log('parent = null', window);\n                    console.log(this.openedWindows);\n                }\n            }\n            this.openedWindows.splice(index, 1);\n            if (parentIndex > -1) {\n                this.openedWindows.splice(parentIndex, 1);\n            }\n            if (action !== 'close') {\n                if (window.IsModal) {\n                    this.openedWindows.push(parent);\n                }\n                this.openedWindows.push(window);\n            }\n            for (let i = 0; i < this.openedWindows.length; ++i) {\n                if (!this.openedWindows[i])\n                    continue;\n                if (this.openedWindows[i].IsModal) {\n                    parent = this.openedWindows.find((x) => x.ID === window.parentID);\n                    window.Z = parent ? parent.Z : i;\n                }\n                else {\n                    this.openedWindows[i].Z = i;\n                }\n            }\n        }\n    }\n    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"16.2.10\", ngImport: i0, type: GDCommonService, deps: [], target: i0.ɵɵFactoryTarget.Injectable }); }\n    static { this.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"16.2.10\", ngImport: i0, type: GDCommonService, providedIn: 'root' }); }\n}\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"16.2.10\", ngImport: i0, type: GDCommonService, decorators: [{\n            type: Injectable,\n            args: [{\n                    providedIn: 'root'\n                }]\n        }], ctorParameters: function () { return []; } });\n\n// @dynamic\nclass GDObject {\n    static instanceOfArrayEditor(object) { return object?.Discriminator === 'I-AM-ARRAY-EDITOR'; }\n    static instanceOfPG(object) { return object?.Discriminator === 'I-AM-PG'; }\n    static instanceOfPGObject(object) { return object?.Discriminator === 'I-AM-PG-OBJECT'; }\n    static instanceOfFilter(object) { return object?.Discriminator === 'I-AM-FILTER'; }\n    static instanceOfTable(object) { return object?.Discriminator === 'I-AM-TABLE'; }\n    static instanceOfGrid(object) { return object?.Discriminator === 'I-AM-GRID'; }\n    static instanceOfGridGrouping(object) { return object?.Discriminator === 'I-AM-GRID-GROUPING'; }\n    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"16.2.10\", ngImport: i0, type: GDObject, deps: [], target: i0.ɵɵFactoryTarget.Component }); }\n    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"14.0.0\", version: \"16.2.10\", type: GDObject, selector: \"gd-object\", ngImport: i0, template: \"\", isInline: true }); }\n}\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"16.2.10\", ngImport: i0, type: GDObject, decorators: [{\n            type: Component,\n            args: [{ selector: \"gd-object\", template: \"\" }]\n        }] });\n// @dynamic\nclass IDGenerator {\n    static { this.lengthID = 8; }\n    static { this.timestamp = +new Date; }\n    static newID() {\n        return this.generate();\n    }\n    static getRandomInt(min, max) {\n        return Math.floor(Math.random() * (max - min + 1)) + min;\n    }\n    static generate() {\n        const ts = this.timestamp.toString();\n        const parts = ts.split('').reverse();\n        let id = '';\n        for (let i = 0; i < this.lengthID; ++i) {\n            const index = this.getRandomInt(0, parts.length - 1);\n            id += parts[index];\n        }\n        return id;\n    }\n    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"16.2.10\", ngImport: i0, type: IDGenerator, deps: [], target: i0.ɵɵFactoryTarget.Component }); }\n    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"14.0.0\", version: \"16.2.10\", type: IDGenerator, selector: \"id-generator\", ngImport: i0, template: \"\", isInline: true }); }\n}\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"16.2.10\", ngImport: i0, type: IDGenerator, decorators: [{\n            type: Component,\n            args: [{ selector: \"id-generator\", template: \"\" }]\n        }] });\n// @dynamic\nclass GDCommonTools {\n    static isNumeric(val) {\n        if (isNaN(parseFloat(val)))\n            return false;\n        return true;\n    }\n    static findRootAncestor(element) {\n        var target = element;\n        while (target.tagName.toLowerCase() !== 'gd-grid-grouping-wrapper' && target.tagName.toLowerCase() !== 'body') {\n            target = target.parentElement;\n        }\n        if (target.tagName.toLowerCase() === 'body')\n            return null;\n        return target;\n    }\n    static findAncestor(element, className) {\n        var target = element;\n        for (var i = 0; i < className.length; ++i) {\n            while (!target.classList.contains(className[i]) && target.tagName.toLowerCase() !== 'body') {\n                target = target.parentElement;\n            }\n            if (target.tagName.toLowerCase() !== 'body')\n                return target;\n            target = element;\n        }\n        return null;\n    }\n    static MeasureText(text, font, style, size = '12') {\n        var div = document.createElement('div');\n        div.id = 'gd-measure-text';\n        document.body.appendChild(div);\n        div.style.background = 'red';\n        div.style.position = 'absolute';\n        div.style.left = '-1000px';\n        div.style.top = '-1000px';\n        div.style.zIndex = '999999';\n        div.style.fontStyle = style;\n        div.style.padding = '0';\n        div.style.margin = '0';\n        div.style.fontSize = size;\n        div.style.fontFamily = font;\n        var maxWidth = 0;\n        var maxHeight = 0;\n        div.innerHTML = text;\n        maxWidth = Math.max(maxWidth, div.clientWidth);\n        maxHeight += div.clientHeight;\n        const result = {\n            w: maxWidth,\n            h: maxHeight\n        };\n        document.body.removeChild(div);\n        div = {};\n        return result;\n    }\n    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"16.2.10\", ngImport: i0, type: GDCommonTools, deps: [], target: i0.ɵɵFactoryTarget.Component }); }\n    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"14.0.0\", version: \"16.2.10\", type: GDCommonTools, selector: \"id-common-tools\", ngImport: i0, template: \"\", isInline: true }); }\n}\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"16.2.10\", ngImport: i0, type: GDCommonTools, decorators: [{\n            type: Component,\n            args: [{ selector: \"id-common-tools\", template: \"\" }]\n        }] });\n// @dynamic\nclass Guid {\n    static newGuid() {\n        return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n            const r = Math.random() * 16 | 0;\n            const v = c === 'x' ? r : (r & 0x3 | 0x8);\n            return v.toString(16);\n        });\n    }\n    static Empty() {\n        return '00000000-0000-0000-0000-000000000000';\n    }\n    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"16.2.10\", ngImport: i0, type: Guid, deps: [], target: i0.ɵɵFactoryTarget.Component }); }\n    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: \"14.0.0\", version: \"16.2.10\", type: Guid, selector: \"guid\", ngImport: i0, template: \"\", isInline: true }); }\n}\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"16.2.10\", ngImport: i0, type: Guid, decorators: [{\n            type: Component,\n            args: [{ selector: \"guid\", template: \"\" }]\n        }] });\nvar State;\n(function (State) {\n    State[State[\"unchanged\"] = 0] = \"unchanged\";\n    State[State[\"added\"] = 1] = \"added\";\n    State[State[\"changed\"] = 2] = \"changed\";\n    State[State[\"deleted\"] = 3] = \"deleted\";\n})(State || (State = {}));\n;\n;\n;\nvar Actions;\n(function (Actions) {\n    Actions[Actions[\"none\"] = 0] = \"none\";\n    Actions[Actions[\"search\"] = 1] = \"search\";\n    Actions[Actions[\"filter\"] = 2] = \"filter\";\n    Actions[Actions[\"inlineData\"] = 3] = \"inlineData\";\n    Actions[Actions[\"reserve0\"] = 4] = \"reserve0\";\n    Actions[Actions[\"addGroup\"] = 5] = \"addGroup\";\n    Actions[Actions[\"editGroup\"] = 7] = \"editGroup\";\n    Actions[Actions[\"addData\"] = 8] = \"addData\";\n    Actions[Actions[\"editData\"] = 9] = \"editData\";\n    Actions[Actions[\"reserve1\"] = 10] = \"reserve1\";\n    Actions[Actions[\"reserve2\"] = 11] = \"reserve2\";\n    Actions[Actions[\"delete\"] = 12] = \"delete\";\n})(Actions || (Actions = {}));\nvar Validation;\n(function (Validation) {\n    Validation[Validation[\"onServer\"] = 0] = \"onServer\";\n    Validation[Validation[\"onClient\"] = 1] = \"onClient\";\n})(Validation || (Validation = {}));\nclass IFilterData {\n    constructor() {\n        this.mode = '';\n    }\n}\nclass PGCategory {\n    constructor(name) {\n        this.isDisabled = false;\n        this.ID = IDGenerator.newID();\n        this.Name = name;\n        this.isDynamic = false;\n        this.Properties = new Array();\n    }\n}\nclass PGProperty {\n    constructor(_categoryName, _isDisabled, _name, _display, _type, _editor, _value, _tabStop) {\n        this.categoryName = _categoryName;\n        this.isDisabled = _isDisabled;\n        this.name = _name;\n        this.display = _display;\n        this.dataType = _type;\n        this.editor = _editor;\n        this.value = _value;\n        this.data = new Array();\n        this.allowDrop = [];\n        this.decimalDigits = 2;\n        this.align = 'right';\n        this.placeHolder = '0.00';\n        this.prefix = '$';\n        this.min = 0;\n        this.max = 100;\n        this.step = 1;\n        this.tabStop = _tabStop;\n    }\n}\n\nclass Point {\n    constructor(x, y) {\n        this.x = x;\n        this.y = y;\n    }\n}\nclass Size {\n    constructor(w, h) {\n        this.w = w;\n        this.h = h;\n    }\n}\nclass Line {\n    constructor(x1, y1, x2, y2) {\n        this.x1 = x1;\n        this.y1 = y1;\n        this.x2 = x2;\n        this.y2 = y2;\n    }\n    IsContains(point, scale) {\n        const vect = new Vector(this.x2 - this.x1, this.y2 - this.y1);\n        vect.Rotate90();\n        vect.Normalize();\n        vect.Scale(2.5);\n        const x1 = this.x1 + vect.x;\n        const y1 = this.y1 + vect.y;\n        const x2 = this.x1 - vect.x;\n        const y2 = this.y1 - vect.y;\n        const x3 = this.x2 + vect.x;\n        const y3 = this.y2 + vect.y;\n        const x4 = this.x2 - vect.x;\n        const y4 = this.y2 - vect.y;\n        const points = new Array();\n        points.push(new Point(x1, y1), new Point(x2, y2), new Point(x4, y4), new Point(x3, y3));\n        const polygon = new Polygon(points);\n        return polygon.IsContains(point);\n    }\n    IsContains1(point, scale) {\n        const vect = new Vector(this.x2 - this.x1, this.y2 - this.y1);\n        vect.Rotate90();\n        vect.Normalize();\n        vect.Scale(2 / scale);\n        const x1 = this.x1 + vect.x;\n        const y1 = this.y1 + vect.y;\n        const x2 = this.x1 - vect.x;\n        const y2 = this.y1 - vect.y;\n        const x3 = this.x2 + vect.x;\n        const y3 = this.y2 + vect.y;\n        const x4 = this.x2 - vect.x;\n        const y4 = this.y2 - vect.y;\n        const points = new Array();\n        points.push(new Point(x1, y1), new Point(x2, y2), new Point(x4, y4), new Point(x3, y3));\n        const polygon = new Polygon(points);\n        return polygon.IsContains(point);\n    }\n}\nclass Rect {\n    constructor(x, y, w, h) {\n        this.x = x;\n        this.y = y;\n        this.w = w;\n        this.h = h;\n    }\n    IsContains(point) {\n        if ((point.x > this.x && point.x < this.x + this.w) &&\n            (point.y > this.y && point.y < this.y + this.h))\n            return true;\n        return false;\n    }\n}\nclass Polygon {\n    constructor(points) {\n        this.points = points;\n    }\n    IsContains(point) {\n        let isIn = false;\n        if (!this.points)\n            return isIn;\n        const x = point.x;\n        const y = point.y;\n        let i = 0;\n        let j = 0;\n        for (i = 0, j = this.points.length - 1; i < this.points.length; j = i++) {\n            //const diffX =  this.points[j].x - this.points[i].x;\n            //const diffY = (this.points[j].y - this.points[i].y) === 0 ? 1 : this.points[j].y - this.points[i].y;\n            //if( (this.points[i].y > y) !== (this.points[j].y > y) &&\n            //    (x < (diffX) * (y - this.points[i].y) / diffY + this.points[i].x) )\n            //{\n            //                isIn = ! isIn;\n            //}\n            const xi = this.points[i].x, yi = this.points[i].y;\n            const xj = this.points[j].x, yj = this.points[j].y;\n            var y_condition = (yi > y) !== (yj > y);\n            var x_condition = x < (xj - xi) * (y - yi) / (yj - yi) + xi;\n            //          const intersect = ((yi > y) !== (yj > y)) && (x < (xj - xi) * (y - yi) / (yj - yi) + xi);\n            const intersect = y_condition && x_condition;\n            if (intersect) {\n                isIn = !isIn;\n            }\n        }\n        return isIn;\n    }\n}\nclass Vector {\n    constructor(x, y) {\n        if (this.isPointCore(x) && this.isPointCore(y)) {\n            this.x = y.x - x.x;\n            this.y = y.y - x.y;\n        }\n        else {\n            this.x = x;\n            this.y = y;\n        }\n    }\n    isPointCore(obj) {\n        return obj.x !== undefined && obj.y !== undefined;\n    }\n    Rotate90() {\n        const x = this.x;\n        this.x = this.y;\n        this.y = -x;\n    }\n    RotateAroundStart(angle) {\n        if (!angle)\n            return;\n        const nx = this.x * Math.cos(angle) - this.y * Math.sin(angle);\n        const ny = this.x * Math.sin(angle) + this.y * Math.cos(angle);\n        this.x = nx;\n        this.y = ny;\n    }\n    AngleBetween(vect) {\n        const radians = Math.atan2(this.y, this.x) - Math.atan2(vect.y, vect.x);\n        return radians * 180 / Math.PI;\n    }\n    Angle() {\n        const radians = Math.atan2(this.y, this.x);\n        return radians * 180 / Math.PI;\n    }\n    Scale(scale) {\n        this.x *= scale;\n        this.y *= scale;\n    }\n    Normalize() {\n        const result = Math.atan2(this.y, this.x);\n        this.x = Math.cos(result);\n        this.y = Math.sin(result);\n    }\n    Length() {\n        const X = this.x * this.x;\n        const Y = this.y * this.y;\n        return Math.sqrt(X + Y);\n    }\n}\n\nclass GDCommonModule {\n    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"16.2.10\", ngImport: i0, type: GDCommonModule, deps: [], target: i0.ɵɵFactoryTarget.NgModule }); }\n    static { this.ɵmod = i0.ɵɵngDeclareNgModule({ minVersion: \"14.0.0\", version: \"16.2.10\", ngImport: i0, type: GDCommonModule, declarations: [IDGenerator,\n            Guid,\n            NoSanitizePipe,\n            FocusDirective,\n            NextDirective,\n            NextManagerDirective,\n            GDDragableDirective,\n            GDDroppableDirective], exports: [IDGenerator,\n            Guid,\n            NoSanitizePipe,\n            FocusDirective,\n            NextDirective,\n            NextManagerDirective,\n            GDDragableDirective,\n            GDDroppableDirective] }); }\n    static { this.ɵinj = i0.ɵɵngDeclareInjector({ minVersion: \"12.0.0\", version: \"16.2.10\", ngImport: i0, type: GDCommonModule }); }\n}\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"16.2.10\", ngImport: i0, type: GDCommonModule, decorators: [{\n            type: NgModule,\n            args: [{\n                    declarations: [\n                        IDGenerator,\n                        Guid,\n                        NoSanitizePipe,\n                        FocusDirective,\n                        NextDirective,\n                        NextManagerDirective,\n                        GDDragableDirective,\n                        GDDroppableDirective\n                    ],\n                    imports: [],\n                    exports: [\n                        IDGenerator,\n                        Guid,\n                        NoSanitizePipe,\n                        FocusDirective,\n                        NextDirective,\n                        NextManagerDirective,\n                        GDDragableDirective,\n                        GDDroppableDirective\n                    ]\n                }]\n        }] });\n\n/*\n * Public API Surface of gd-common\n */\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { Actions, DefaultMaskDirective, DisableDirective, FocusDirective, GDCommonModule, GDCommonService, GDCommonTools, GDDragableDirective, GDDroppableDirective, GDObject, Guid, IDGenerator, IFilterData, Line, NextDirective, NextManagerDirective, NoSanitizePipe, PGCategory, PGProperty, Point, Polygon, Rect, Size, State, Validation, Vector };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}